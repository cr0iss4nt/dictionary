<div class="container mb-3">
    <!-- Filter checkbox -->
    <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="showInflectableOnly" onclick="filterInflectableWords()">
        <label class="form-check-label" for="showInflectableOnly">
            Показать только склоняемые/спрягаемые слова (существительные, прилагательные, инфинитивы)
        </label>
    </div>

    <div class="table-responsive">
        <table class="table table-striped" id="wordsTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Слово</th>
                    <th>Часть речи</th>
                    <th>Основа</th>
                    <th>Окончание</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody id="wordsTableBody">
                {% for word in words %}
                <tr class="word-row" data-part-of-speech="{{ word[2] }}">
                    <td>{{ word[0] }}</td>
                    <td>{{ word[1] }}</td>
                    <td>{{ word[2] }}</td>
                    <td>{{ word[3] }}</td>
                    <td>{{ word[4] }}</td>
                    <td>
                        <a href="{{ url_for('edit', word=word[1]) }}" class="btn btn-sm btn-warning">
                            <i class="bi bi-pencil"></i>
                        </a>
                        <a href="{{ url_for('delete_word', word=word[1]) }}" class="btn btn-sm btn-danger"
                           onclick="return confirm('Удалить слово?')">
                            <i class="bi bi-trash"></i>
                        </a>
                        <a href="{{ url_for('add_base_and_ending', word=word[1]) }}" class="btn btn-sm btn-info"
                           onclick="return confirm('Разобрать слово по составу?')">
                            Разобрать
                        </a>
                        {% if word[2] in ['NOUN', 'ADJF', 'INFN'] %}
                        <a href="{{ url_for('make_word_form', word=word[1]) }}" class="btn btn-sm btn-secondary">
                            Сделать словоформу
                        </a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script>
function filterInflectableWords() {
    const checkbox = document.getElementById('showInflectableOnly');
    const rows = document.querySelectorAll('.word-row');

    rows.forEach(row => {
        const partOfSpeech = row.getAttribute('data-part-of-speech');
        const isInflectable = ['NOUN', 'ADJF', 'INFN'].includes(partOfSpeech);

        if (checkbox.checked) {
            // Show only inflectable words
            row.style.display = isInflectable ? '' : 'none';
        } else {
            // Show all words
            row.style.display = '';
        }
    });
}

// Initialize filter on page load if needed
document.addEventListener('DOMContentLoaded', function() {
    // Check if checkbox should be checked from sessionStorage
    const savedFilter = sessionStorage.getItem('showInflectableOnly');
    if (savedFilter === 'true') {
        document.getElementById('showInflectableOnly').checked = true;
        filterInflectableWords();
    }

    // Save filter preference
    document.getElementById('showInflectableOnly').addEventListener('change', function() {
        sessionStorage.setItem('showInflectableOnly', this.checked);
    });
});
</script>